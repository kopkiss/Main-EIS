{% extends 'importDB/base.html' %}
{% load static %}
{% block content %}
{% load plotly_dash %}
{% load humanize %}




<div class="container-fluid">
  <div class="row" >
    <div class="col-xs-12 col-md-12 col-lg-12 "  >
      <div class="pr-3 mb-1" style=" float: right;">
        <b>ข้อมูลจาก ระบบ PubsWatch</b>
        <span class = "px-2" style="font-size:15px; background-color: coral;  border-radius: 30px; "><b>Last updated: </b> {{date}}</span>
      </div> 
    </div>
  </div>
  <div class="row "  >
    <div class=" ranking-col1 ml-4 mb-3 mr-2 card pretty_container">
      <div class="row" >
        <span class ="ranking-com_pre-button-col1 mt-1 ml-4">
          <h5 class = "subtitle mt-2 ml-2" style="display:inline-block"> &nbsp; จำนวนการตีพิมพ์ต่อปี (Scopus, ISI-WoS, TCI)</h5>
        </span>
        <span class ="ranking-com_pre-button-col1 mt-2 ml-4" >
          <form action="comparing" target="_blank" method=GET style="display:inline-block; ">
            <input name = Comparing type="submit" value="Comparison" class="btn-shadow btn btn-info" style="width:auto; "/>
          </form>
          <form action="prediction" target="_blank" method=GET style="display:inline-block;  ">
            <input name = Prediction type="submit" value="Prediction" class="btn-shadow btn btn-success" style="width:auto; "/>
          </form>
        </span> 
      </div>
      <span class = "pl-3 pr-5">
        {{ line_chart_publication | safe }}
      </span>
    </div>
    <div class=" ranking-col2 ">
      <!-- <form target="_blank" method=POST>
        {% csrf_token %}             -->
        <div class="row mb-3 ml-4 mr-2" onclick="location.href= 'cite_info/sco'; target='_blank'; " id = "tab_sco"  >
          <div class="card pretty_container red-card" style="position: relative;width: 100%;height: 10rem;">
            <div class="row" >
              <div class = "col" >
                <h5 class = " subtitle mt-3 mb-1 ml-3" style="background-color :transparent">&nbsp;จำนวนการตีพิมพ์รวมในฐาน Scopus </h5> 
              </div>
            </div>
            <div class="card-body h2 text-danger " style="text-align: center; font-size: 300%;" >
                  <span>{{ total_publication.sco |intcomma }}</span>
            </div>
          </div>
        </div>
      <!-- </form> -->
      <div class="row mb-3 ml-4 mr-2" onclick="location.href= 'cite_info/isi';" id = "tab_isi" target="_blank">
        <div class="card pretty_container blue-card" style="position: relative;width: 100%;height: 10rem;">
          <div class="row" >
            <div class = "col">
              <h5 class = "subtitle mt-3 mb-1 ml-3 " style="background-color :transparent" >&nbsp;จำนวนการตีพิมพ์รวมในฐาน ISI-WoS</h5> 
            </div>
          </div>
          <div class="card-body h2 text-primary" style="text-align: center; font-size: 300%" >
            <span>{{ total_publication.isi |intcomma }}</span>
          </div>
        </div>
      </div>
      <div class="row mb-3 ml-4 mr-2" onclick="location.href= 'cite_info/tci';" id = "tab_tci" target="_blank">
        <div class="card pretty_container yellow-card" style="position: relative;width: 100%;height: 10rem;">
          <div class="row" >
            <div class = "col">
              <h5 class = "subtitle mt-3 mb-1 ml-3" style="background-color :transparent">&nbsp;จำนวนการตีพิมพ์รวมในฐาน TCI</h5> 
            </div>
            <div class = "col-lg-2 pt-3">
              <!-- <img src="{% static 'img/bulb_2251110.png' %}" 
                title=""  
                style="display: block; margin-left: auto; margin-right: auto;" 
                width="20" height="20"/>  -->
            </div>
          </div>
          <div class="card-body h2 text-warning" style="text-align: center; font-size: 300%" >
            <span>{{ total_publication.tci |intcomma }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row " >
    <div class=" ml-4 mb-3 mr-3 mr-4 card pretty_container" style="width:100% ">
      <div class ="row ml-3 mt-3">
        <div class=" ranking-re-area-col1 mb-1" >
          <form name='filter' method=POST  class="pt-1">
            {% csrf_token %}
            <div class="subtitle card-header-title " style="width:90% "><h5 style="display:inline-block;" > &nbsp;ISI-WoS Research Areas | ปี พ.ศ. : &nbsp;</h5>
              <select id="year" name = "year" class=" btn ex2 btn-primary dropdown-toggle" onChange="filter.submit();">
                  {% for y in year  %}
                      {% if y == filter_year%} 
                          <option value="{{ y }}" selected>{{ y }} </option>
                      {% else %}
                          <option value="{{ y }}" >{{ y }} </option>
                      {%endif%}
                  {% endfor %}
              </select>
            </div>  
          </form>
        </div>
        <div class=" ranking-re-area-col2 " >
          <form action="research_area_moreinfo " name='filter_area' method=POST target="_blank" style="border-style:solid;  border-radius: 30px; border-color: rgb(138, 224, 220); width:600px;" >
            {% csrf_token %}
            <div class="pt-1 pb-1"><h6 style="display:inline-block;"> &nbsp;&nbsp;&nbsp;&nbsp;ข้อมูลรายปี :&nbsp; </h6>
              <select id="area" name = "area" class=" btn ex2 btn-info dropdown-toggle ">
                <option selected="selected" disabled>- - โปรดระบุ Research Areas - -</option>
                <!-- - - โปรดระบุ Research Areas - - -->
                {% for area in areas_selecter  %}
                  
                  <option value="{{ area }}" >{{ area }} </option>
                {% endfor %}
              </select>
              <input id = "btnSubmit" type="submit" value="Refine" class="btn-shadow btn btn-danger ml-2"  style="width:80px; "/>  
              &nbsp;
            </div>
          </form>
        </div>
        <!-- <form action="comparing" target="_blank" method=GET style="display:inline-block; ">
          <input name = Comparing type="submit" value="Comparison" class="btn-shadow btn btn-info" style="width:auto; "/>
        </form> -->
      </div>
      <div id="bar" name = 'bar'>
        {{ bar_chart | safe }}
      </div>
    </div>
  </div>
</div>


{% endblock content %}

{% block js %}
<script>
  // src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">
  

  // $('select').on('change', function() {
  //   var value = $(this).val();
    
  //   if (value == "categ") {
  //     $('#bar1').show();
  //     $('#bar2').hide();
  //   } else if (value == "resea") {
  //     $('#bar2').show();
  //     $('#bar1').hide();
  //   }
  // });
  $(document).ready( function () { 
    $("#btnSubmit").attr('disabled',true)
  } );

  $("select").on('change',function(){
   if($(this).find('option:selected').text()=="- - โปรดระบุ Research Areas - -")
       $("#btnSubmit").attr('disabled',true)
   else
       $("#btnSubmit").attr('disabled',false)
  });
</script>

{% endblock js %}
